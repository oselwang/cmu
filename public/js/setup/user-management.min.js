$(document).ready(function(){$("#datatable").DataTable({}),$.ajax({type:"get",url:defaultUrl+"setup/role/all",success:function(e){var a=$("#create-user-form"),t=$("#edit-user-form");$.each(e,function(e,n){a.find('select[name="role_id"]').append($("<option>",{value:n.id,text:n.nama})),t.find('select[name="role_id"]').append($("<option>",{value:n.id,text:n.nama}))})}}),$("#create-user").on("click",function(){$("#create-user-modal").modal("toggle")}),$("#datatable-body").on("click","#row #delete",function(){var e=$(this),a=e.parent(),t=a.parent().find('input[name="user_id"]').val();swal({title:"Apakah kamu yakin?",type:"warning",showCancelButton:!0,confirmButtonColor:"#e63d53",confirmButtonText:"Iya",cancelButtonText:"Tidak"}).then(function(e){e.value&&$.ajax({type:"post",url:defaultUrl+"setup/user-management/delete",data:{user_id:t,_token:$('input[name="_token"]').val()},success:function(e){location.reload()},error:function(e){var a=$.parseJSON(e.responseText);$.each(a,function(e,a){swal({title:"Maaf.",text:a,type:"error",showConfirmButton:!0})})}})})}).on("click","#row #edit",function(){var e=$(this),a=e.parent().parent();$("#edit-user-modal").modal("toggle");var t=$("#edit-user-form");$.ajax({type:"get",url:defaultUrl+"setup/user-management/"+a.find('input[name="user_id"]').val(),success:function(e){t.find('input[name="dealer_id[]"]').prop("checked",!1),t.find('input[name="action_id[]"]').prop("checked",!1),$.each(e.dealer,function(e,a){t.find('input[name="dealer_id[]"][value='+a.id+"]").prop("checked",!0)}),$.each(e.action,function(e,a){t.find('input[name="action_id[]"][value='+a.id+"]").prop("checked",!0)}),t.find('select[name="role_id"]').val(e.role_id)}}),t.find('input[name="nama"]').val(a.find("#nama").text()),t.find('input[name="user_id"]').val(a.find('input[name="user_id"]').val()),t.find('input[name="username"]').val(a.find("#username").text()),t.find('input[name="password"]').val(a.find("#password").text()),t.find('input[name="tipe_jasa_id"]').val(a.find('input[name="tipe_jasa_id"]').val())}),$("#edit-user-form").on("submit",function(e){e.preventDefault(),$("#error-edit-user").addClass("hidden").empty();var a=$(this);$.ajax({type:"post",url:defaultUrl+"setup/user-management/update",data:a.serializeArray(),success:function(e){location.reload()},error:function(e){var a=$.parseJSON(e.responseText);$("#error-edit-user").empty(),$.each(a,function(e,a){$("#error-edit-user").removeClass("hidden").append("<li>"+a+"</li>")}),$("#edit-user-modal").animate({scrollTop:0},"slow")}})}),$("#create-user-form").on("submit",function(e){e.preventDefault();var a=$(this);$("#error-create-user").addClass("hidden").empty(),$.ajax({type:"post",url:defaultUrl+"setup/user-management/create",data:a.serializeArray(),success:function(e){location.reload()},error:function(e){var a=$.parseJSON(e.responseText);$("#error-create-user").empty(),$.each(a,function(e,a){$("#error-create-user").removeClass("hidden").append("<li>"+a+"</li>")}),$("#create-user-modal").animate({scrollTop:0},"slow")}})})});