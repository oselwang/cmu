$(document).ready(function(){$("#datatable").DataTable({}),$.ajax({type:"get",url:defaultUrl+"bengkel/kategori-sp/all",success:function(e){var t=$("#create-code-sp-form"),a=$("#edit-code-sp-form");$.each(e,function(e,i){t.find('select[name="kategori_sp_id"]').append($("<option>",{value:i.id,text:i.deskripsi})),a.find('select[name="kategori_sp_id"]').append($("<option>",{value:i.id,text:i.deskripsi}))})}}),$.ajax({type:"get",url:defaultUrl+"bengkel/tipe-sp/all",success:function(e){var t=$("#create-code-sp-form"),a=$("#edit-code-sp-form");$.each(e,function(e,i){t.find('select[name="tipe_sp_id"]').append($("<option>",{value:i.id,text:i.deskripsi})),a.find('select[name="tipe_sp_id"]').append($("<option>",{value:i.id,text:i.deskripsi}))})}}),$("#create-code-sp").on("click",function(){$("#create-code-sp-modal").modal("toggle")}),$("#datatable-body").on("click","#row #delete",function(){var e=$(this),t=e.parent(),a=t.parent().find("input").val();swal({title:"Apakah kamu yakin?",type:"warning",showCancelButton:!0,confirmButtonColor:"#e63d53",confirmButtonText:"Iya",cancelButtonText:"Tidak"}).then(function(e){e.value&&$.ajax({type:"post",url:defaultUrl+"bengkel/code-sp/delete",data:{code_sp_id:a,_token:$('input[name="_token"]').val()},success:function(e){location.reload()},error:function(e){var t=$.parseJSON(e.responseText);$.each(t,function(e,t){swal({title:"Maaf.",text:t,type:"error",showConfirmButton:!0})})}})})}).on("click","#row #edit",function(){var e=$(this),t=e.parent().parent();$("#edit-code-sp-modal").modal("toggle");var a=$("#edit-code-sp-form");a.find('input[name="deskripsi"]').val(t.find("#deskripsi").text()),a.find('input[name="identifier"]').val(t.find("#identifier").text()),a.find('select[name="kategori_sp_id"]').val(t.find('input[name="kategori_sp_id"]').val()),a.find('select[name="tipe_sp_id"]').val(t.find('input[name="tipe_sp_id"]').val()),a.find('input[name="code_sp_id"]').val(t.find('input[name="code_sp_id"]').val()),a.find('select[name="status"]').val(t.find("#status").text())}),$("#edit-code-sp-form").on("submit",function(e){e.preventDefault(),$("#error-edit-code-sp").addClass("hidden").empty();var t=$(this);$.ajax({type:"post",url:defaultUrl+"bengkel/code-sp/update",data:t.serializeArray(),success:function(e){location.reload()},error:function(e){var t=$.parseJSON(e.responseText);$("#error-edit-code-sp").empty(),$.each(t,function(e,t){$("#error-edit-code-sp").removeClass("hidden").append("<li>"+t+"</li>")}),$("#edit-code-sp-modal").animate({scrollTop:0},"slow")}})}),$("#create-code-sp-form").on("submit",function(e){e.preventDefault();var t=$(this);$("#error-create-code-sp").addClass("hidden").empty(),$.ajax({type:"post",url:defaultUrl+"bengkel/code-sp/create",data:t.serializeArray(),success:function(e){location.reload()},error:function(e){var t=$.parseJSON(e.responseText);$("#error-create-code-sp").empty(),$.each(t,function(e,t){$("#error-create-code-sp").removeClass("hidden").append("<li>"+t+"</li>")}),$("#create-code-sp-modal").animate({scrollTop:0},"slow")}})})});