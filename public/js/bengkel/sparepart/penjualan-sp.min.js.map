{"version":3,"sources":["penjualan-sp.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"penjualan-sp.min.js","sourcesContent":["var container = '<div class=\"col-md-6 col-xs-12\" id=\"penjualan-sp-detail\"> ' +\n    '<div class=\"x_panel\"> ' +\n    '<div class=\"x_title\"> ' +\n    '<h2>Penjualan Spare Part' +\n    '<small>Info Detail</small> </h2> <div class=\"clearfix\"></div> </div> <div class=\"x_content\"> <br/> <div class=\"form-group\"> <label class=\"control-label col-md-3 col-sm-3 col-xs-12\" for=\"\">Code Spare Part <span class=\"required\">*</span> ' +\n    '</label> <div class=\"col-md-5 col-sm-5 col-xs-10\"> <input type=\"text\" id=\"\" required=\"required\"class=\"form-control col-md-7 col-xs-12\" name=\"code\"> <input type=\"hidden\" name=\"detail_part_id\"> ' +\n    '</div> <div class=\"col-md-1 col-sm-1 col-xs-2\"> <button type=\"button\" class=\"btn btn-primary\" id=\"find-detail-sp\">Cari</button> </div> </div> ' +\n    '<div class=\"form-group\"> <label class=\"control-label col-md-3 col-sm-3 col-xs-12\" for=\"qty\">Kuantitas Pembelian </label> <div class=\"col-md-6 col-sm-6 col-xs-12\"> <input type=\"text\" id=\"qty\" name=\"qty\" required=\"required\" class=\"form-control col-md-7 col-xs-12\"> ' +\n    '</div> </div> <div class=\"form-group\"> <label class=\"control-label col-md-3 col-sm-3 col-xs-12\" for=\"ref_date\">Harga Jual </label> <div class=\"col-md-5 col-sm-5 col-xs-10\"> <input type=\"text\" disabled id=\"harga_jual\" class=\"form-control col-md-7 col-xs-12\"> ' +\n    '</div> <div class=\"col-md-1 col-sm-1 col-xs-2\"> <a href=\"' + defaultUrl + 'bengkel/detail-sp' + '\" class=\"btn btn-primary\">Ubah</a> </div> </div> <div class=\"form-group\"> ' +\n    '<label class=\"control-label col-md-3 col-sm-3 col-xs-12\" for=\"ref_date\">Stock </label> <div class=\"col-md-6 col-sm-6 col-xs-12\"> <input type=\"text\" disabled id=\"stock\" class=\"form-control col-md-7 col-xs-12\"> ' +\n    '</div> </div> <div class=\"form-group\"> <label class=\"control-label col-md-3 col-sm-3 col-xs-12\" for=\"ref_date\">Status </label> <div class=\"col-md-6 col-sm-6 col-xs-12\"> <input type=\"text\" disabled id=\"status\" class=\"form-control col-md-7 col-xs-12\"> ' +\n    '</div> </div> <div class=\"form-group\"> <div class=\"col-md-offset-3 col-sm-offset-3 col-md-9 col-sm-9\" id=\"add-remove-button-container\"> ' +\n    '<button type=\"button\" class=\"btn btn-default btn-sm\" id=\"add-spare-part\">Tambah Spare Part </button> <button type=\"button\" class=\"btn btn-default btn-sm\" id=\"remove-spare-part\">Hapus Spare Part ' +\n    '</button> </div> </div> <div class=\"ln_solid\"></div> </div> </div> </div>';\n\n\n$(document).ready(function () {\n\n    $('#datatable').DataTable({});\n\n    $('#create-penjualan-sp-form').submit(function (e) {\n        e.preventDefault();\n        var _ = $(this);\n        var data = _.serializeArray();\n        console.log(data);\n        $.ajax({\n            type: 'post',\n            data: data,\n            url: defaultUrl + 'bengkel/penjualan-sp/create',\n            success: function (data) {\n                location.reload();\n            },\n            error: function (data) {\n                var errors = $.parseJSON(data.responseText);\n                $('#error-create-penjualan-sp').empty();\n                $.each(errors, function (index, value) {\n                    $('#error-create-penjualan-sp').removeClass('hidden').append('<li>' + value + '</li>');\n                });\n                $('html,body').animate({scrollTop: 0}, 'slow');\n            }\n        });\n\n    }).on('click', '#penjualan-sp-detail #add-spare-part', function (e) {\n        e.preventDefault();\n        var _ = $(this);\n        var container = _.parent().parent().parent().parent().parent();\n        container.clone().appendTo('#penjualan-sp-detail-container').find('input[type=\"text\"]').val('');\n        _.remove();\n    }).on('click', '#penjualan-sp-detail #remove-spare-part', function (e) {\n        e.preventDefault();\n        var _ = $(this);\n        var container = _.parent().parent().parent().parent().parent();\n        container.remove();\n        if ($('#add-spare-part').length == 0) {\n            if ($('#penjualan-sp-detail').length == 0) {\n                $('#create-customer-button-container').append('<button class=\"btn btn-default btn-sm\" type=\"button\" id=\"add-spare-part\">Tambah Spare Part</button>');\n            } else {\n                $('#penjualan-sp-detail:last').find('#add-remove-button-container').prepend('<button class=\"btn btn-default btn-sm\" type=\"button\" id=\"add-spare-part\">Tambah Spare Part</button>');\n            }\n        }\n    }).on('click', '#create-customer-button-container #add-spare-part', function (e) {\n        e.preventDefault();\n        console.log(container);\n        $('#penjualan-sp-detail-container').append(container);\n        $(this).remove();\n    }).on('click', '#find-customer-bengkel', function (e) {\n        e.preventDefault();\n\n        var phone = $('input[name=\"phone\"]').val();\n        $.ajax({\n            type: 'get',\n            url: defaultUrl + 'bengkel/customer-bengkel/phone/' + phone,\n            success: function (data) {\n                if (jQuery.isEmptyObject(data)) {\n                    $('#nama').val('Data tidak ditemukan');\n                    $('#alamat').val('Data tidak ditemukan');\n                    $('#kota').val('Data tidak ditemukan');\n                } else {\n                    $('input[name=\"customer_bengkel_id\"]').val(data.id);\n                    $('#nama').val(data.nama);\n                    $('#alamat').val(data.alamat);\n                    $('#kota').val(data.kota.nama);\n                }\n            }\n        });\n    }).on('click', '#penjualan-sp-detail #find-detail-sp', function (e) {\n        e.preventDefault();\n\n        var parent = $(this).parent().parent().parent();\n        var code = parent.find('input[name=\"code\"]').val();\n        $.ajax({\n            type: 'get',\n            url: defaultUrl + 'bengkel/detail-sp/code/' + code,\n            success: function (data) {\n                if (jQuery.isEmptyObject(data)) {\n                    parent.find('#harga_jual').val('Data tidak ditemukan');\n                    parent.find('#stock').val('Data tidak ditemukan');\n                    parent.find('#status').val('Data tidak ditemukan');\n                } else {\n                    if (data.stock == 0) {\n                        $('html,body').animate({scrollTop: 0}, 'slow');\n                        $('#error-create-penjualan-sp').removeClass('hidden').append('<li>Tidak bisa input jika stock 0</li>');\n                        $('#submit-button').prop('disabled', true);\n                    } else {\n                        $('#error-create-penjualan-sp').addClass('hidden');\n                        $('#submit-button').prop('disabled', false);\n                    }\n                    parent.find('input[name=\"detail_sp_id[]\"]').val(data.id);\n                    parent.find('#harga_jual').val(data.harga_jual);\n                    parent.find('#stock').val(data.stock);\n                    parent.find('#status').val(data.status);\n                }\n            }\n        });\n    });\n\n    $('#delete-button').on('click', function (e) {\n        e.preventDefault();\n        swal({\n            title: \"Apakah kamu yakin?\",\n            type: \"warning\",\n            showCancelButton: true,\n            confirmButtonColor: \"#e63d53\",\n            confirmButtonText: \"Hapus\",\n            cancelButtonText: \"Batal\"\n        }).then(function (result) {\n            if (result.value) {\n                $.ajax({\n                    type: 'post',\n                    url: defaultUrl + 'bengkel/penjualan-sp/delete',\n                    data: {\n                        penjualan_sp_id: $('input[name=\"penjualan_sp_id\"]').val(),\n                        _token: $('input[name=\"_token\"]').val()\n                    },\n                    success: function (data) {\n                        window.location.href = defaultUrl + 'bengkel/penjualan-sp';\n                    }\n                });\n            }\n        });\n    });\n});\n\n\n"]}