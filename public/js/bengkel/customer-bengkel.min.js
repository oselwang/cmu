$(document).ready(function(){$("#datatable").DataTable({}),$.ajax({type:"get",url:defaultUrl+"setup/kota/all",success:function(e){var n=$("#create-customer-bengkel-form"),a=$("#edit-customer-bengkel-form");$.each(e,function(e,t){n.find('select[name="kota_id"]').append($("<option>",{value:t.id,text:t.nama})),a.find('select[name="kota_id"]').append($("<option>",{value:t.id,text:t.nama}))})}}),$.ajax({type:"get",url:defaultUrl+"setup/warna/all",success:function(e){var n=$("#create-customer-bengkel-form"),a=$("#edit-customer-bengkel-form");$.each(e,function(e,t){n.find('select[name="warna_id"]').append($("<option>",{value:t.id,text:t.nick})),a.find('select[name="warna_id"]').append($("<option>",{value:t.id,text:t.nick}))})}}),$.ajax({type:"get",url:defaultUrl+"setup/kelurahan/all",success:function(e){var n=$("#create-customer-bengkel-form"),a=$("#edit-customer-bengkel-form");$.each(e,function(e,t){n.find('select[name="kelurahan_id"]').append($("<option>",{value:t.id,text:t.nama})),a.find('select[name="kelurahan_id"]').append($("<option>",{value:t.id,text:t.nama}))})}}),$.ajax({type:"get",url:defaultUrl+"setup/kecamatan/all",success:function(e){var n=$("#create-customer-bengkel-form"),a=$("#edit-customer-bengkel-form");$.each(e,function(e,t){n.find('select[name="kecamatan_id"]').append($("<option>",{value:t.id,text:t.nama})),a.find('select[name="kecamatan_id"]').append($("<option>",{value:t.id,text:t.nama}))})}}),$.ajax({type:"get",url:defaultUrl+"setup/unit/all",success:function(e){var n=$("#create-customer-bengkel-form"),a=$("#edit-customer-bengkel-form");$.each(e,function(e,t){n.find('select[name="unit_id"]').append($("<option>",{value:t.id,text:t.nick})),a.find('select[name="unit_id"]').append($("<option>",{value:t.id,text:t.nick}))})}}),$.ajax({type:"get",url:defaultUrl+"bengkel/jenis-buku/all",success:function(e){var n=$("#create-customer-bengkel-form"),a=$("#edit-customer-bengkel-form");$.each(e,function(e,t){n.find('select[name="jenis_buku_id"]').append($("<option>",{value:t.id,text:t.deskripsi})),a.find('select[name="jenis_buku_id"]').append($("<option>",{value:t.id,text:t.deskripsi}))})}}),$("#create-customer-bengkel").on("click",function(){$("#create-customer-bengkel-modal").modal("toggle")}),$("#datatable-body").on("click","#row #delete",function(){var e=$(this),n=e.parent(),a=n.parent().find("input").val();swal({title:"Apakah kamu yakin?",type:"warning",showCancelButton:!0,confirmButtonColor:"#e63d53",confirmButtonText:"Iya",cancelButtonText:"Tidak"}).then(function(e){e.value&&$.ajax({type:"post",url:"customer-bengkel/delete",data:{customer_bengkel_id:a,_token:$('input[name="_token"]').val()},success:function(e){location.reload()},error:function(e){var n=$.parseJSON(e.responseText);$.each(n,function(e,n){swal({title:"Maaf.",text:n,type:"error",showConfirmButton:!0})})}})})}).on("click","#row #edit",function(){var e=$(this),n=e.parent().parent();$("#edit-customer-bengkel-modal").modal("toggle");var a=$("#edit-customer-bengkel-form"),t=n.find('input[name="customer_bengkel_id"]').val();$.ajax({type:"get",url:defaultUrl+"bengkel/customer-bengkel/"+t,success:function(e){a.find('input[name="nama"]').val(e.nama),a.find('input[name="alamat"]').val(e.alamat),a.find('input[name="no_rangka"]').val(e.no_rangka),a.find('input[name="no_polisi"]').val(e.no_polisi),a.find('input[name="no_mesin"]').val(e.no_mesin),a.find('input[name="tahun"]').val(e.tahun),a.find('input[name="no_ksg"]').val(e.no_ksg),a.find('input[name="kode_pos"]').val(e.kode_pos),a.find('input[name="no_polisi"]').val(e.no_polisi),a.find('input[name="tanggal_lahir"]').val(e.tanggal_lahir),a.find('input[name="telephone_number"]').val(e.telephone_number),a.find('input[name="cellphone_number"]').val(e.cellphone_number),a.find('input[name="id_number"]').val(e.id_number),a.find('input[name="stnk_expiry_date"]').val(e.stnk_expiry_date),a.find('select[name="kota_id"]').val(e.kota.id),a.find('select[name="kelurahan_id"]').val(e.kelurahan.id),a.find('select[name="kecamatan_id"]').val(e.kecamatan.id),a.find('select[name="unit_id"]').val(e.unit.id),a.find('select[name="warna_id"]').val(e.warna.id),a.find('select[name="jenis_buku_id"]').val(e.jenis_buku.id),a.find('select[name="gender"]').val(e.gender),a.find('select[name="tipe_konsumen"]').val(e.tipe_konsumen),a.find('input[name="customer_bengkel_id"]').val(n.find('input[name="customer_bengkel_id"]').val())}})}),$("#edit-customer-bengkel-form").on("submit",function(e){e.preventDefault(),$("#error-edit-customer-bengkel").addClass("hidden").empty();var n=$(this);$.ajax({type:"post",url:"customer-bengkel/update",data:n.serializeArray(),success:function(e){location.reload()},error:function(e){var n=$.parseJSON(e.responseText);$("#error-edit-customer-bengkel").empty(),$.each(n,function(e,n){$("#error-edit-customer-bengkel").removeClass("hidden").append("<li>"+n+"</li>")}),$("#edit-customer-bengkel-modal").animate({scrollTop:0},"slow")}})}),$("#create-customer-bengkel-form").on("submit",function(e){e.preventDefault();var n=$(this);$("#error-create-customer-bengkel").addClass("hidden").empty(),$.ajax({type:"post",url:defaultUrl+"bengkel/customer-bengkel/create",data:n.serializeArray(),success:function(e){location.reload()},error:function(e){var n=$.parseJSON(e.responseText);$("#error-create-customer-bengkel").empty(),$.each(n,function(e,n){$("#error-create-customer-bengkel").removeClass("hidden").append("<li>"+n+"</li>")}),$("#create-customer-bengkel-modal").animate({scrollTop:0},"slow")}})})});